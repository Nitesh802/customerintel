{
  "type": "object",
  "required": ["margin_analysis", "cost_drivers", "efficiency_initiatives", "financial_metrics", "citations"],
  "properties": {
    "margin_analysis": {
      "type": "object",
      "required": ["gross_margin", "operating_margin", "ebitda_margin", "trend_analysis"],
      "properties": {
        "gross_margin": {
          "type": "object",
          "required": ["current", "previous", "trend"],
          "properties": {
            "current": {"type": "number"},
            "previous": {"type": "number"},
            "trend": {
              "type": "string",
              "enum": ["expanding", "stable", "compressing", "volatile"]
            },
            "drivers": {
              "type": "array",
              "items": {"type": "string"}
            }
          }
        },
        "operating_margin": {
          "type": "object",
          "required": ["current", "previous", "trend"],
          "properties": {
            "current": {"type": "number"},
            "previous": {"type": "number"},
            "trend": {
              "type": "string",
              "enum": ["expanding", "stable", "compressing", "volatile"]
            }
          }
        },
        "ebitda_margin": {
          "type": "object",
          "required": ["current", "previous"],
          "properties": {
            "current": {"type": "number"},
            "previous": {"type": "number"}
          }
        },
        "trend_analysis": {
          "type": "string",
          "minLength": 50
        }
      }
    },
    "cost_drivers": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["category", "impact", "trend", "description"],
        "properties": {
          "category": {"type": "string"},
          "impact": {
            "type": "string",
            "enum": ["major", "moderate", "minor"]
          },
          "trend": {
            "type": "string",
            "enum": ["increasing", "stable", "decreasing"]
          },
          "description": {"type": "string"},
          "mitigation": {"type": "string"}
        }
      }
    },
    "efficiency_initiatives": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["initiative", "expected_savings", "timeline", "status"],
        "properties": {
          "initiative": {"type": "string"},
          "expected_savings": {"type": "string"},
          "timeline": {"type": "string"},
          "status": {
            "type": "string",
            "enum": ["planned", "in-progress", "completed", "cancelled"]
          },
          "actual_savings": {"type": "string"}
        }
      }
    },
    "financial_metrics": {
      "type": "object",
      "properties": {
        "revenue_per_employee": {"type": "string"},
        "sg_a_ratio": {"type": "number"},
        "capex_to_revenue": {"type": "number"},
        "working_capital_days": {"type": "integer"}
      }
    },
    "citations": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["source_id"],
        "properties": {
          "source_id": {"type": "integer"},
          "quote": {"type": "string"},
          "page": {"type": "string"},
          "url": {"type": "string"}
        }
      }
    }
  }
}